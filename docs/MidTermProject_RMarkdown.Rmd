---
title: "Understanding Stock Price Beahavior using an R Based Analytical Framework"
author: "Francis Kurian"
date: "10/8/2021"
output:
  pdf_document: default
  html_document:
    df_print: paged
---
\section*{Introduction}
Stock market behavior is a well researched area with plenty of historic information available free. Several studies link the stock price movement of a company to the perception of the market participant about that company.IBM Watson APIs enable tracking of company specific news and social media interactions through extensive text mining and help come out with a Sentiment (Negative and positive emotions expressed through words or text) Index for a business.Business Sentiment Index(BSI) is one such index calculated by TRaiCE Fintech at company level. In addition, to understand  sensitivity of stock prices to Global events, Foreign Exchanges Rate is also introduced as an additional measure.  Idea here is to demonstrate how to extract various relevant data elements from diverse sources, transform and load them into an analytic framework to visualize and understand the inherent relationships.   

\section*{Objective}
Primary objective is to develop an analysis system using various R libraries. Extracting and processing data from multiple sources, data cleaning, simplifying repetitive tasks using control structures and functions, use of data visualization techniques and application of statistical methods  are the focus areas while building the framework in R. In other words, learn to write reproducible R code while analyzing stock price movement with respect to Business Sentiment Index(BSI) and Foreign Exchange Rate is the objective of this project.

\section*{List of Libraries}
For this project the following Libraries are used for data validation, graphics and statistical analysis

```{r libraries, echo=TRUE,message=FALSE,warning=FALSE,results=FALSE}
library(ggplot2) 
library(tidyr)
library(plyr)
library(lubridate)
library(scales)
library(reshape2)
library(summarytools) #dataframe summaries
library(ggfortify) #autoplot
library(sjPlot) #tabmodel
```

\section*{Data sources, Extraction and Cleaning}
\subsection{Data files(.csv)used, Description and source}
### 1.List of companies to Analyze: Internally created CSV
### 2.Foreign Exchange daily data for various currencies: https://www.federalreserve.gov 
### 3.Daily Stock Prices: https://finance.yahoo.com 
### 4.Business Sentiments Index(BSI,IBM Watson API based): https://www.traice.io 

This project uses 6 different companies as test cases. However as long as the data files are available, companies can be added to the list and no code changes are necessary. Stock Price and BSI data will have 6 files each. Foreign Exchange is macro economic data so only one file with three different exchange rates are downloaded from the Federal Reserve. Daily data for two years(01-SEP-2019 to 31-AUG-2021) are used for the analysis.

\subsection{Reading CSV files(sections 1,2) and formatting}
```{r csv1, echo=TRUE}
source("./src/fn_data_preperation.R")
fn.analysis("GE", "Stock.Price","bsi_score")

```

\subsection{Reading CSV files(sections 3,4) in a loop and formatting}
\subsubsection{Checks the csv files are existing for the specified list. Breaks the DO LOOP otherwise}
```{r csv2, echo=TRUE}
fn.data_diagnostics()
```
\subsection{Visualizing the Data Series used in Analysis }
```{r vis1, echo=TRUE}


```
\section{User Defined Function for Company Level Analysis }
A generic function "fn.regres" was defined and it takes company name, dependent(x) and independent(y) variables for the regression analysis. It ensures that necessary data frames to conduct the analysis exists and polots, analysis summaries and other visual diagnostics are available in the results set.
```{r fn1, echo=TRUE}


```
\subsection{Executing the user defined Function to Test a Company with no data }
Expectation is that even if the user added a company name in to the list of companies to analyze and there is no data downloaded for that company,  this should not result in an error and the user should be alerted about missing data. 

```{r fn2, echo=TRUE}

```
\subsection{Executing the Analysis Function Repeatedly for various Companies in the list }
This outputs a scatterplot that shows the relationship between the variables, Standard Summary results of a regression function, Tabulated results of a regression function with coefficients and plots residuals for better diagnostics. Simple regression can be performed for any company and any set of variables. The coefficients and p values quantify the sensitivity of the variable and degree of confidence. Multiple regression and tests of time series properties are for the future development.   

```{r fn3, echo=TRUE}

```
\section{Summary of the Analysis }
Scatterplot and regression analysis demonstrate a significant relationship between Stock Prices and Business Sentiment Index and Stock Prices and USDvsEuro foreign exchange rates in case of General Electric Company. The same analysis can be repeated for any 6 companies in our test list by calling the function "fn_regression()" repeatedly with simply changing the function arguments.This is a rudimentary analysis with simple regression however significant effort was spent on reading and cleaning data  from various sources and made several data series consumable for various advanced algorithms that R offers. In the future, multiple regression  approach and time series models like co-integration can be explored  and that will add more analytic content to this project. 
\section{References}
1. Understanding Diagnostic Plots for Linear Regression Analysis. 
https://data.library.virginia.edu/diagnostic-plots
